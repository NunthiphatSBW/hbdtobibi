<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Happy Birthday To Bibi❤️</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&family=Prompt:wght@500;700&display=swap" rel="stylesheet">
<style>
  :root{
    /* ปรับจำนวน/ขนาดเอฟเฟกต์ได้ที่นี่ */
    --bubble-count: 22;
    --sparkle-count: 16;
    --bubble-min: 24px;
    --bubble-max: 68px;
    --sparkle-min: 10px;
    --sparkle-max: 22px;
  }

  html,body{
    height:100%; margin:0;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    overflow:hidden;
    background:linear-gradient(180deg,#ffeaf4 0%,#ffd3e7 50%,#ffb6d9 100%);
    font-family:"Poppins","Prompt","Noto Sans Thai",system-ui,sans-serif;
    position:relative;
  }

  /* ===== พื้นหลังเคลื่อนไหว (ข้างหลังทั้งหมด) ===== */
  .fx{position:fixed; inset:0; z-index:0; pointer-events:none}
  .bubble,.sparkle{
    position:absolute; border-radius:50%; pointer-events:none; will-change:transform,opacity;
    mix-blend-mode:screen;
  }
  .bubble{
    animation:floatUp linear infinite;
    box-shadow: inset -8px -8px 16px rgba(255,255,255,.85),
                0 6px 16px rgba(255,160,210,.25);
  }
  .sparkle{
    background: radial-gradient(circle, #fff 0%, rgba(255,210,235,.65) 55%, rgba(255,210,235,0) 75%);
    box-shadow: 0 0 16px 6px rgba(255,255,255,.5), 0 0 28px 10px rgba(255,170,220,.35);
    animation:twinkle 2.6s ease-in-out infinite, spin 12s linear infinite;
  }
  @keyframes floatUp{
    0%   { transform: translateY(6vh) scale(.85); opacity:0 }
    12%  { opacity:.55 }
    60%  { opacity:.9 }
    100% { transform: translateY(-120vh) scale(1.35); opacity:0 }
  }
  @keyframes twinkle{ 0%,100%{ transform:scale(.9); opacity:.55 } 50%{ transform:scale(1.25); opacity:1 } }
  @keyframes spin{ to{ transform:rotate(360deg) } }

  /* ===== ทิวลิปขอบซ้าย/ขวา (จาง ๆ ไม่แย่งซีน) ===== */
  .tulips{
    position:fixed; top:0; bottom:0; width:22vw; min-width:170px; pointer-events:none; z-index:1;
    -webkit-mask:linear-gradient(90deg, transparent 0%, #000 28%, #000 100%);
            mask:linear-gradient(90deg, transparent 0%, #000 28%, #000 100%);
    opacity:.22;
  }
  .tulips.right{
    right:0;
    -webkit-mask:linear-gradient(270deg, transparent 0%, #000 28%, #000 100%);
            mask:linear-gradient(270deg, transparent 0%, #000 28%, #000 100%);
  }
  .tulips svg{ width:100%; height:100%; display:block }
  .fly{ animation: rise var(--dur,30s) linear infinite var(--delay,0s), sway 7s ease-in-out infinite alternate }
  @keyframes rise{ from{ transform:translateY(15vh) } to{ transform:translateY(-90vh) } }
  @keyframes sway{ from{ transform:translateX(-6px) } to{ transform:translateX(6px) } }
  .depth-1{ filter:url(#blurSoft) }
  .depth-2{ filter:url(#blurSoft) opacity(.9) }
  .depth-3{ filter:url(#blurStrong) opacity(.85) }

  /* ===== ข้อความคมชัด ===== */
  .text{
    position:relative; z-index:3; text-align:center; margin-bottom:26px;
  }
  .text::before{
    content:""; position:absolute; inset:-20px -28px; z-index:-1;
    background:radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.28), rgba(255,255,255,0) 65%);
    filter: blur(8px);
  }
  .text h1{
    margin:0; white-space:nowrap; color:#fff;
    font-size:clamp(46px,8vw,92px); font-weight:800; letter-spacing:1.2px;
    text-shadow: 0 2px 4px rgba(0,0,0,.25), 0 0 8px rgba(255,160,200,.45);
  }
  .text p{
    margin:10px 0 0; font:500 clamp(18px,2.6vw,24px)/1.35 "Prompt","Poppins",sans-serif; color:#fffdfd;
    text-shadow: 0 2px 4px rgba(0,0,0,.25), 0 0 6px rgba(255,200,220,.6);
  }

  /* ===== เค้กกลางจอ ===== */
  .stage{ position:relative; z-index:3; width:min(520px,90vw); aspect-ratio:1/1.1 }
  .floor{ position:absolute; bottom:0; left:50%; transform:translateX(-50%); width:80%; height:16px; background:#f0cadd; border-radius:999px; box-shadow:0 20px 40px rgba(0,0,0,.25) }
  .plate{ position:absolute; bottom:20px; left:50%; transform:translateX(-50%); width:72%; height:18px; background:#fff6fa; border-radius:999px; box-shadow:0 10px 20px rgba(0,0,0,.2) }
  .cake{ position:absolute; bottom:40px; left:50%; transform:translateX(-50%); display:flex; flex-direction:column; align-items:center; gap:10px }
  .tier{ position:relative; background:#ffe7c9; border-radius:24px; box-shadow:0 10px 20px rgba(0,0,0,.25) }
  .t3{ width:340px; height:100px } .t2{ width:260px; height:88px } .t1{ width:180px; height:78px }
  .band{ position:absolute; left:0; right:0; top:45%; height:22px; background:#915d3d }
  .cream{ position:absolute; left:4%; right:4%; top:-12px; height:28px; background:#fff8f6; border-radius:16px; box-shadow:inset 0 4px 8px rgba(255,255,255,.8) }
  .drips{ position:absolute; left:4%; right:4%; top:10px; height:28px }
  .drip{ position:absolute; width:16px; height:22px; border-radius:10px; background:linear-gradient(180deg,#ffe6f1 0%,#ffb6d6 60%,#ff8fbe 100%) }
  .t1 .drip:nth-child(1){left:10%} .t1 .drip:nth-child(2){left:45%} .t1 .drip:nth-child(3){left:75%}
  .t2 .drip:nth-child(1){left:20%} .t2 .drip:nth-child(2){left:55%}
  .t3 .drip:nth-child(1){left:15%} .t3 .drip:nth-child(2){left:35%} .t3 .drip:nth-child(3){left:65%} .t3 .drip:nth-child(4){left:80%}
  .candles{ position:absolute; left:50%; top:-40px; transform:translateX(-50%); display:flex; gap:12px }
  .candle{ width:10px; height:30px; background:#fff; border-radius:6px; position:relative; box-shadow:inset 0 -5px 6px rgba(0,0,0,.1) }
  .wick{ position:absolute; left:50%; top:-6px; width:2px; height:6px; transform:translateX(-50%); background:#333 }
  .flame{ position:absolute; left:50%; top:-18px; transform:translateX(-50%); width:12px; height:18px; border-radius:50%; background:radial-gradient(50% 60% at 50% 40%, #fff8d6 0%, #ffd266 55%, #ff9e3d 80%); box-shadow:0 0 20px rgba(255,210,100,.8) }

  /* ===== ลูกเล่นเสริม (คอนเฟตตี/ควัน/หัวใจ/ปุ่ม) ===== */
  .confetti, .smoke, .heart {
    position: fixed; pointer-events: none; will-change: transform, opacity; z-index: 5;
  }
  .confetti { width: 8px; height: 14px; border-radius: 2px; animation: confettiFall 900ms cubic-bezier(.2,.6,.2,1) forwards; }
  @keyframes confettiFall {
    0%   { transform: translate(0,0) rotate(0deg); opacity: 1; }
    100% { transform: translate(var(--dx), var(--dy)) rotate(var(--rot)); opacity: 0; }
  }
  .smoke {
    width: 6px; height: 6px; border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, rgba(255,255,255,.9), rgba(180,180,180,.25));
    animation: smokeUp 900ms ease-out forwards; filter: blur(.2px);
  }
  @keyframes smokeUp {
    0%   { transform: translate(0,0) scale(.6); opacity:.0; }
    20%  { opacity:.35; }
    100% { transform: translate(var(--sx), -90px) scale(1.6); opacity:0; }
  }
  .heart {
    width: 14px; height: 14px; transform: rotate(45deg);
    background: radial-gradient(circle at 30% 30%, #fff, #ffd6ea 60%, #ff9fca 100%);
    box-shadow: 0 0 10px rgba(255,120,180,.35);
    animation: heartFloat var(--ht, 9s) ease-in forwards;
  }
  .heart::before, .heart::after { content:""; position:absolute; width:14px; height:14px; background:inherit; border-radius:50%; }
  .heart::before { top:-7px; left:0; } .heart::after { top:0; left:-7px; }
  @keyframes heartFloat{
    0%   { transform: translateY(0) rotate(45deg) scale(.9); opacity:0; }
    12%  { opacity:.85; }
    100% { transform: translateY(-110vh) rotate(45deg) scale(1.15); opacity:0; }
  }
  @keyframes flicker { 0%,100%{ transform: translateX(-50%) scaleY(1); filter: brightness(1); } 50%{ transform: translateX(-50%) scaleY(1.15); filter: brightness(1.25); } }
  .flame.relit { animation: flicker .9s ease-in-out infinite; }

  .fx-ui {
    position: fixed; right: 14px; bottom: 14px; z-index: 9; display:flex; gap:10px; font-family: inherit;
  }
  .fx-ui button{
    padding:8px 12px; border-radius:12px; border:0; cursor:pointer;
    background:#ffffffcc; color:#7a3a58; font-weight:600; box-shadow: 0 6px 16px rgba(0,0,0,.08);
  }
  .fx-ui button:hover{ background:#fff; }

  /* มือถือ */
  @media (max-width:480px){
    .tulips{ width:26vw; min-width:140px }
    .stage{ width:94vw }
    .text h1{ font-size:clamp(38px,9vw,78px) }
  }
</style>
</head>
<body>

<!-- พื้นหลัง: ฟองอากาศ + สปาร์กเคิล -->
<div class="fx" id="fx-layer"></div>

<!-- ทิวลิปฝั่งซ้าย -->
<div class="tulips left" aria-hidden="true">
  <svg viewBox="0 0 300 800" preserveAspectRatio="xMidYMid slice">
    <defs>
      <linearGradient id="petalL" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%"  stop-color="#ffd9e9"/><stop offset="55%" stop-color="#ffb2d4"/><stop offset="100%" stop-color="#ff95c4"/>
      </linearGradient>
      <linearGradient id="leafL" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#e8faee"/><stop offset="100%" stop-color="#bdebd0"/>
      </linearGradient>
      <filter id="blurSoft"><feGaussianBlur stdDeviation="2.4"/></filter>
      <filter id="blurStrong"><feGaussianBlur stdDeviation="4.2"/></filter>
      <g id="tulipL">
        <path d="M0,0 C0,60 0,120 0,180" stroke="url(#leafL)" stroke-width="6" fill="none" stroke-linecap="round"/>
        <path d="M0,0 C-60,20 -60,80 -6,110" fill="url(#leafL)" opacity=".9"/>
        <path d="M0,24 C52,8 60,70 6,108"  fill="url(#leafL)" opacity=".85"/>
        <path d="M0,-6 C26,-10 46,-46 42,-74 C26,-50 12,-40 0,-38 C-12,-40 -26,-50 -42,-74 C-46,-46 -26,-10 0,-6 Z" fill="url(#petalL)"/>
        <path d="M0,-10 C16,-14 28,-34 26,-52 C14,-38 8,-32 0,-30 C-8,-32 -14,-38 -26,-52 C-28,-34 -16,-14 0,-10 Z" fill="url(#petalL)"/>
      </g>
    </defs>
    <g class="depth-1 fly" style="--dur:30s; --delay:-4s" transform="translate(70,760)"><use href="#tulipL"/></g>
    <g class="depth-2 fly" style="--dur:34s; --delay:-10s" transform="translate(130,800)"><use href="#tulipL"/></g>
    <g class="depth-3 fly" style="--dur:36s; --delay:-18s" transform="translate(20,820)"><use href="#tulipL"/></g>
  </svg>
</div>

<!-- ทิวลิปฝั่งขวา -->
<div class="tulips right" aria-hidden="true">
  <svg viewBox="0 0 300 800" preserveAspectRatio="xMidYMid slice">
    <defs>
      <linearGradient id="petalR" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%"  stop-color="#ffd9e9"/><stop offset="55%" stop-color="#ffb2d4"/><stop offset="100%" stop-color="#ff95c4"/>
      </linearGradient>
      <linearGradient id="leafR" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#e8faee"/><stop offset="100%" stop-color="#bdebd0"/>
      </linearGradient>
      <filter id="blurSoftR"><feGaussianBlur stdDeviation="2.4"/></filter>
      <filter id="blurStrongR"><feGaussianBlur stdDeviation="4.2"/></filter>
      <g id="tulipR">
        <path d="M0,0 C0,60 0,120 0,180" stroke="url(#leafR)" stroke-width="6" fill="none" stroke-linecap="round"/>
        <path d="M0,0 C-60,20 -60,80 -6,110" fill="url(#leafR)" opacity=".9"/>
        <path d="M0,24 C52,8 60,70 6,108"  fill="url(#leafR)" opacity=".85"/>
        <path d="M0,-6 C26,-10 46,-46 42,-74 C26,-50 12,-40 0,-38 C-12,-40 -26,-50 -42,-74 C-46,-46 -26,-10 0,-6 Z" fill="url(#petalR)"/>
        <path d="M0,-10 C16,-14 28,-34 26,-52 C14,-38 8,-32 0,-30 C-8,-32 -14,-38 -26,-52 C-28,-34 -16,-14 0,-10 Z" fill="url(#petalR)"/>
      </g>
    </defs>
    <g class="depth-1 fly" style="--dur:29s; --delay:-6s" transform="translate(200,760)"><use href="#tulipR"/></g>
    <g class="depth-2 fly" style="--dur:33s; --delay:-12s" transform="translate(120,810)"><use href="#tulipR"/></g>
    <g class="depth-3 fly" style="--dur:35s; --delay:-2s" transform="translate(30,830)"><use href="#tulipR"/></g>
  </svg>
</div>

<!-- ข้อความ + เค้ก (กึ่งกลาง) -->
<div class="text">
  <h1>❤️Happy Birthday To Bibi❤️</h1>
  <p>🎁🎂 ขอให้วันนี้ของบี๋เต็มไปด้วยรอยยิ้มและความสุขข 🎂🎁</p>
</div>

<div class="stage" aria-label="Birthday cake">
  <div class="floor"></div>
  <div class="plate"></div>
  <div class="cake">
    <div class="tier t1">
      <div class="cream"></div>
      <div class="drips"><div class="drip"></div><div class="drip"></div><div class="drip"></div></div>
      <div class="band"></div>
      <div class="candles">
        <div class="candle"><div class="wick"></div><div class="flame"></div></div>
        <div class="candle"><div class="wick"></div><div class="flame"></div></div>
        <div class="candle"><div class="wick"></div><div class="flame"></div></div>
      </div>
    </div>
    <div class="tier t2">
      <div class="cream"></div>
      <div class="band"></div>
      <div class="drips"><div class="drip"></div><div class="drip"></div></div>
    </div>
    <div class="tier t3">
      <div class="cream"></div>
      <div class="band"></div>
      <div class="drips"><div class="drip"></div><div class="drip"></div><div class="drip"></div><div class="drip"></div></div>
    </div>
  </div>
</div>

<!-- ปุ่มเล่นเอฟเฟกต์ -->
<div class="fx-ui" aria-hidden="true">
  <button id="btn-confetti">Pop</button>
  <button id="btn-toggle-fx">Toggle FX</button>
  <button id="btn-relight">Relight</button>
</div>

<script>
  /* ===== พื้นหลัง: ฟองอากาศ + สปาร์กเคิล ===== */
  const bubbleColors = ['#ffc0cb88','#aad8ff88','#e5b6ff88','#ffd1dc88','#fbc8e288'];
  const fx = document.getElementById('fx-layer');

  const bc = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--bubble-count'));
  for(let i=0;i<bc;i++){
    const b = document.createElement('div');
    b.className = 'bubble';
    const min = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--bubble-min'));
    const max = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--bubble-max'));
    const size = Math.random()*(max-min)+min;
    b.style.width = b.style.height = size+'px';
    b.style.left = (Math.random()*100)+'%';
    b.style.bottom = (-20 - Math.random()*40)+'px';
    b.style.background = `radial-gradient(circle at 30% 30%, rgba(255,255,255,.95), ${bubbleColors[Math.floor(Math.random()*bubbleColors.length)]})`;
    b.style.animationDuration = (16 + Math.random()*14)+'s';
    b.style.animationDelay = (-Math.random()*18)+'s';
    fx.appendChild(b);
  }

  const sc = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--sparkle-count'));
  for(let i=0;i<sc;i++){
    const s = document.createElement('div');
    s.className = 'sparkle';
    const min = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--sparkle-min'));
    const max = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--sparkle-max'));
    const size = Math.random()*(max-min)+min;
    s.style.width = s.style.height = size+'px';
    s.style.left = (Math.random()*100)+'%';
    s.style.top  = (Math.random()*100)+'%';
    s.style.animationDuration = (2 + Math.random()*3)+'s, '+(8 + Math.random()*8)+'s';
    s.style.animationDelay = (-Math.random()*4)+'s, '+(-Math.random()*8)+'s';
    fx.appendChild(s);
  }

  /* ===== คอนเฟตตี ===== */
  function confettiBurst(x, y, count = 80) {
    const colors = ['#ff8bbd','#ffd166','#9ad1ff','#b78bff','#ffb3d6'];
    for (let i = 0; i < count; i++) {
      const el = document.createElement('span');
      el.className = 'confetti';
      const size  = 6 + Math.random() * 8;
      el.style.width = size + 'px';
      el.style.height = (size * (0.8 + Math.random()*0.6)) + 'px';
      el.style.left = (x - size/2) + 'px';
      el.style.top  = (y - size/2) + 'px';
      el.style.background = colors[i % colors.length];
      const angle = (Math.random() * Math.PI * 2);
      const power = 120 + Math.random() * 220;
      el.style.setProperty('--dx',  Math.cos(angle) * power + 'px');
      el.style.setProperty('--dy',  Math.sin(angle) * power + 'px');
      el.style.setProperty('--rot', (Math.random()*720 - 360) + 'deg');
      document.body.appendChild(el);
      el.addEventListener('animationend', () => el.remove());
    }
  }
  document.addEventListener('pointerdown', (e) => {
    if (e.target.closest('.fx-ui')) return;
    confettiBurst(e.clientX, e.clientY);
  });
  document.getElementById('btn-confetti').onclick = () => {
    const rect = document.querySelector('.text h1')?.getBoundingClientRect();
    const cx = rect ? rect.left + rect.width/2 : window.innerWidth/2;
    const cy = rect ? rect.top  + rect.height/2 : window.innerHeight/2;
    confettiBurst(cx, cy, 120);
  };

  /* ===== เป่าเทียน + ควัน + ติดไฟกลับ ===== */
  const flames = Array.from(document.querySelectorAll('.flame'));
  function blowCandles() {
    flames.forEach(f => {
      f.style.opacity = 0; f.classList.remove('relit');
      const rect = f.getBoundingClientRect();
      for (let i=0;i<10;i++){
        const s = document.createElement('span');
        s.className = 'smoke';
        s.style.left = (rect.left + rect.width/2 + (Math.random()*16-8)) + 'px';
        s.style.top  = (rect.top  + (Math.random()*8-6)) + 'px';
        s.style.setProperty('--sx', (Math.random()*30-15) + 'px');
        document.body.appendChild(s);
        s.addEventListener('animationend', () => s.remove());
      }
    });
    setTimeout(() => flames.forEach(f => { f.style.opacity = 1; f.classList.add('relit'); }), 2200);
  }
  document.querySelector('.candles')?.addEventListener('click', blowCandles);
  document.getElementById('btn-relight').onclick = () => {
    flames.forEach(f => { f.style.opacity = 1; f.classList.add('relit'); });
  };

  /* ===== หัวใจลอยน่ารัก ๆ ===== */
  let heartsOn = true;
  function spawnHeart() {
    if (!heartsOn) return;
    const h = document.createElement('span');
    h.className = 'heart';
    const x = Math.random()*window.innerWidth;
    h.style.left = x + 'px';
    h.style.top  = (window.innerHeight + 20) + 'px';
    h.style.setProperty('--ht', (8 + Math.random()*6) + 's');
    document.body.appendChild(h);
    h.addEventListener('animationend', () => h.remove());
    setTimeout(spawnHeart, 1200 + Math.random()*1800);
  }
  spawnHeart();

  /* ===== ปุ่มสลับเอฟเฟกต์ ===== */
  let fxEnabled = true;
  document.getElementById('btn-toggle-fx').onclick = () => {
    fxEnabled = !fxEnabled;
    document.getElementById('fx-layer').style.display = fxEnabled ? 'block' : 'none';
    heartsOn = fxEnabled;
    if (fxEnabled) spawnHeart();
  };
</script>
</body>
</html>
